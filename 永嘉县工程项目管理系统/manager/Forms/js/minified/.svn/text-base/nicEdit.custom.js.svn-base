nicEditorPanel.prototype.construct=function(g,b,a){this.elm=g;this.options=b;this.ne=a;this.panelButtons=new Array();this.buttonList=bkExtend([],this.ne.options.buttonList);this.panelElm=g;g.innerHTML="";var d=this.ne.options;var f=d.buttons;for(button in f){this.addButton(button,d,true)}this.reorder();try{g.noSelect()}catch(c){}};bkLib.cancelEvent=function(a){a=a||window.event;if(a){if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation()}}return false};var NicEditXHTML=bkClass.extend({stripAttributes:["_moz_dirty","_moz_resizing","_extended"],noShort:["script"],cssReplace:{"font-weight:bold;":"strong","font-style:italic;":"em"},sizes:{1:"xx-small",2:"x-small",3:"small",4:"medium",5:"large",6:"x-large"},construct:function(){},saveXhtml:function(d){var e=this.toXHTML(d,false,true);if(e.indexOf("<div")!=0){e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>"}var c=0;for(var b=0;b<d.childNodes.length;b++){var a=d.childNodes[b];if(a.nodeType==1){if(a.nodeName.indexOf("/")<0){c++}}}if(c>1){e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>"}return e},toXHTML:function(c,a,m){var h="";var q="";var s="";var k=c.nodeType;var t=c.nodeName.toLowerCase();var p=c.hasChildNodes&&c.hasChildNodes();var b=new Array();switch(k){case 1:var j=c.attributes;if(a){for(var g=0;g<j.length;g++){var l=j[g];var o=l.nodeName.toLowerCase();var e=l.nodeValue;if(o=="istextcontrol"){continue}if(o=="style"){if(InfoJet_IsIE()){e=c.style.cssText}}else{if(!l.specified||!e||bkLib.inArray(this.stripAttributes,o)||typeof(e)=="function"){continue}}if(e){q+=" "+o+'="'+e+'"'}}for(var g=0;g<b.length;g++){h+="<"+b[g]+">"}if(q==""&&t=="span"){a=false}if(a){if(t.indexOf("/")>=0&&(!p)){}else{h+="<"+t;if(t!="br"){h+=q}}}}if(!p&&!bkLib.inArray(this.noShort,t)){if(a){if(t.indexOf("/")>=0){}else{h+=" />"}}}else{if(a){h+=">"}for(var g=0;g<c.childNodes.length;g++){var f=this.toXHTML(c.childNodes[g],true,true);if(f){h+=f}}}if(a&&p){h+="</"+t+">"}for(var g=0;g<b.length;g++){h+="</"+b[g]+">"}break;case 3:h+=c.nodeValue;break}return h}});nicEditorConfig.prototype.buttonList=["fontSize","fontFamily","bold","italic","underline","forecolor","bgcolor","left","center","right","justify","ol","ul","indent","outdent","link","unlink","image",];bkElement.prototype.removeClass=function(a){if(this.hasClass(a)){this.className=this.className.replace(new RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)")," ").replace(/(^\s*)|(\s*$)/g,"")}return this};nicEditorBgColorButton.prototype.colorSelect=function(a){this.ne.nicCommand("BackColor",a);this.removePane()};nicEditorAdvancedButton.prototype.addForm=function(c,h){InfoJet_NicEditor_PaneExisting=true;this.form=new bkElement("form").addEvent("submit",this.submit.closureListener(this));this.pane.append(this.form);this.inputs={};for(itm in c){var d=c[itm];var g="";if(h){g=h.getAttribute(itm)}if(!g){g=d.value||""}var a=c[itm].type;if(a=="title"){new bkElement("div").setContent(d.txt).setStyle({fontSize:"14px",fontWeight:"bold",padding:"0px",margin:"2px 0"}).appendTo(this.form)}else{var b=new bkElement("div").setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);if(d.txt){new bkElement("label").setAttributes({"for":itm}).setContent(d.txt).setStyle({margin:"2px 4px",fontSize:"13px",width:"50px",lineHeight:"20px",textAlign:"right","float":"left"}).appendTo(b)}switch(a){case"text":this.inputs[itm]=new bkElement("input").setAttributes({id:itm,value:g,type:"text"}).setStyle({margin:"2px 0",fontSize:"13px","float":"left",height:"20px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(d.style).appendTo(b);break;case"select":this.inputs[itm]=new bkElement("select").setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left",margin:"2px 0"}).appendTo(b);for(opt in d.options){var e=new bkElement("option").setAttributes({value:opt,selected:(opt==g)?"selected":""}).setContent(d.options[opt]).appendTo(this.inputs[itm])}break;case"content":this.inputs[itm]=new bkElement("textarea").setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left"}).setStyle(d.style).appendTo(b);this.inputs[itm].value=g}}}new bkElement("input").setAttributes({type:"submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0","float":"left",clear:"both"}).appendTo(this.form);this.form.onsubmit=bkLib.cancelEvent};nicLinkButton.prototype.addPane=function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A");this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",value:"_blank",options:{_blank:"New Window","":"Current Window"},style:{width:"100px"}}},this.ln)};nicImageButton.prototype.addPane=function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG");this.addForm({"":{type:"title",txt:"Add/Edit Image"},src:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},alt:{type:"text",txt:"Alt Text",style:{width:"100px"}},align:{type:"select",txt:"Align",options:{"":"Default",left:"Left",right:"Right"}}},this.im)};nicEditorSelect.prototype.construct=function(d,a,c,b){this.options=c.buttons[a];this.elm=d;this.ne=b;this.name=a;this.selOptions=new Array();this.margin=new bkElement("DIV").setStyle({"float":"left",marginTop:"2px"}).appendTo(d);this.contain=new bkElement("DIV").setStyle({width:"20px",height:"20px"}).addClass("buttonContain").appendTo(this.margin);this.border=new bkElement("DIV").setStyle({backgroundColor:"#efefef",border:"1px solid #efefef"}).appendTo(this.contain);this.button=new bkElement("DIV").setStyle({width:"18px",height:"18px",overflow:"hidden",zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(a,c)).appendTo(this.border);this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",this.toggle.closure(this)).noSelect();if(!window.opera){this.button.onmousedown=this.button.onclick=bkLib.cancelEvent}this.margin.noSelect();this.ne.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this));this.disable();this.init()};nicEditorSelect.prototype.hoverOn=function(){if(!this.isDisabled){this.isHover=true;this.updateState();this.ne.fireEvent("buttonOver",this)}};nicEditorSelect.prototype.hoverOff=function(){this.isHover=false;this.updateState();this.ne.fireEvent("buttonOut",this)};nicEditorSelect.prototype.updateState=function(){if(this.isDisabled){this.setBg()}else{if(this.isHover){this.setBg("hover")}else{if(this.isActive){this.setBg("active")}else{this.setBg()}}}};nicEditorSelect.prototype.setBg=function(a){switch(a){case"hover":var b={border:"1px solid #666",backgroundColor:"#ddd"};break;case"active":var b={border:"1px solid #666",backgroundColor:"#ccc"};break;default:var b={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(b).addClass("button-"+a)};nicEditorSelect.prototype.setDisplay=function(a){};nicEditorSelect.prototype.open=function(){this.pane=new nicEditorPane(this.border,this.ne,{width:"88px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#fff"});for(var c=0;c<this.selOptions.length;c++){var b=this.selOptions[c];var a=new bkElement("div").setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"88px",textAlign:"left",overflow:"hidden",cursor:"pointer"});var d=new bkElement("div").setStyle({padding:"0px 4px"}).setContent(b[1]).appendTo(a).noSelect();d.addEvent("click",this.update.closure(this,b[0])).addEvent("mouseover",this.over.closure(this,d)).addEvent("mouseout",this.out.closure(this,d)).setAttributes("id",b[0]);this.pane.append(a);if(!window.opera){d.onmousedown=bkLib.cancelEvent}}};nicEditorConfig.prototype.iconList={bgcolor:2,forecolor:3,bold:4,center:5,hr:6,indent:7,italic:8,justify:9,left:10,ol:11,outdent:12,removeformat:13,right:14,save:15,strikethrough:16,subscript:17,superscript:18,ul:19,underline:20,image:21,link:22,unlink:23,close:24,fontSize:25,fontFamily:26};